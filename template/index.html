<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="content-security-policy" content="default-src 'self'; script-src 'unsafe-inline'; style-src 'unsafe-inline'; img-src data:">
  <meta name="viewport" content="width=device-width, minimum-scale=1" />

  <style>
  /* Reset */

  *, *::before, *::after {
    box-sizing: border-box;
  }

  * { margin: 0 }

  input, button, textarea, select {
    font: inherit;
    color: currentColor;
  }

  :root {
    --space-very-small: .25rem;
    --space-small: .5rem;
    --space: 1rem;

    --color-accent: oklch(59.1% .236 10.25);
    --color-text: oklch(.84 0 0);
    --color-canvas: oklch(0.258 0.007 285.867);
    --color-canvas-lighter: oklch(0.303 0.007 285.966);
    --color-canvas-lighterer: oklch(0.343 0.009 285.935);
  }

  .content-grid {
    --padding-inline: 1rem;
    --content-max-width: 70ch;
    --breakout-max-width: 85ch;

    --breakout-size: calc((var(--breakout-max-width) - var(--content-max-width)) / 2);

    display: grid;
    grid-template-columns:
      [full-width-start]
        minmax(var(--padding-inline), 1fr)
        [breakout-start]
          minmax(0, var(--breakout-size))
          [content-start]
            min(
              100% - (var(--padding-inline) * 2),
              var(--content-max-width)
            )
          [content-end]
          minmax(0, var(--breakout-size))
        [breakout-end]
        minmax(var(--padding-inline), 1fr)
      [full-width-end];

    > * {
      grid-column: content;
    }

    > .breakout {
      grid-column: breakout;
    }

    > .full-width {
      grid-column: full-width;
    }
  }

  body {
    /* Thanks modernfontstacks.com */
    font-size: .95rem;
    font-family: Inter, Roboto, 'Helvetica Neue', 'Arial Nova', 'Nimbus Sans', Arial, sans-serif;
    font-weight: normal;
    color: var(--color-text);
    background: var(--color-canvas);
  }

  main {
    padding-inline: var(--space);
  }

  main > table {
    width: 100%;
    border-spacing: 0;

    tr {
      &:nth-child(even) {
        background: var(--color-canvas-lighter);
      }

      > * {
        white-space: nowrap;
        border: var(--color-canvas-lighterer) solid;
        border-width: 0 1px;
        padding: .15rem var(--space-small);
      }

      /* request size and response size */
      > :nth-child(7),
      > :nth-child(8) {
        text-align: right;
      }

      > :last-child {
        --_end-at: var(--end-at, 100);

        width: 100%;
        max-width: 0;

        position: relative;

        .span {
          --_start-at: var(--start-at, 0);
          --_duration: var(--duration);

          display: block;
          position: absolute;
          top: 0;
          left: calc((var(--_start-at) * 100%) / var(--_end-at));
          width: calc((var(--_duration) * 100%) / var(--_end-at));
          height: 100%;
          background: var(--color-accent);
          border-radius: 3px;

          > span {
            position: absolute;
            font-size: small;
            top: 10%;
            left: calc(100% + var(--space-very-small));
          }
        }
      }
    }
  }
  </style>

  <title>Network viewer</title>
</head>

<body class="content-grid">

<nav>Nav</nav>

<main class="full-width">

<table>
  <thead>
    <tr>
      <th scope="col">Conn. ID</th>
      <th scope="col">Req. ID</th>
      <th scope="col">Status</th>
      <th scope="col">Method</th>
      <th scope="col">Domain</th>
      <th scope="col">Path</th>
      <th scope="col"><abbr title="Request">Req.</abbr> size</th>
      <th scope="col"><abbr title="Response">Resp.</abbr> size</th>
      <th scope="col">Time</th>
    </tr>
  </thead>

  <tbody style="--end-at: {end_at}">
    {rows}
  </tbody>
</table>

</main>

</body>
</html>
